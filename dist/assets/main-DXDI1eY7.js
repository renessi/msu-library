(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function B(){if(typeof window>"u"||typeof document>"u")return()=>{};const e=window._SVG_SPRITE_IDS_=window._SVG_SPRITE_IDS_||[],t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="absolute",t.style.width="0",t.style.height="0";function r(){document.body.insertBefore(t,document.body.firstChild)}return document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r(),function(n,l){(e.indexOf(l)>-1||document.getElementById(l))&&console.warn(`Icon #${l} was duplicately registered. It must be globally unique.`),e.push(l),t.insertAdjacentHTML("beforeend",n)}}const u=B();u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17" id="icon-user"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 14.5v-1.333c0-.708-.29-1.386-.806-1.886a2.8 2.8 0 0 0-1.944-.781h-5.5c-.73 0-1.429.281-1.945.781A2.63 2.63 0 0 0 3 13.167V14.5M8.5 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5" /></symbol>',"icon-user");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 34 34" id="icon-download"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M26 19v4a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2v-4M12 14l5 5 5-5M17 19V7" /></symbol>',"icon-download");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 38 38" id="icon-arrow-right"><rect width="38" height="38" rx="19" /><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.327 18.606h15.346M19 10.934l7.673 7.673L19 26.28" /></symbol>',"icon-arrow-right");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 34 34" id="icon-copy"><path stroke="currentColor" stroke-width="2" d="M21.25 4.25h-8.5a5.667 5.667 0 0 0-5.667 5.667V21.25" /><path stroke="currentColor" stroke-width="2" d="M12.333 16.292c0-1.685.002-2.865.104-3.77.1-.884.284-1.381.568-1.75q.26-.34.6-.6c.369-.284.866-.469 1.75-.569.905-.102 2.085-.103 3.77-.103 1.684 0 2.864.001 3.769.103.885.1 1.382.285 1.75.569q.34.26.6.6c.284.369.47.866.569 1.75.102.905.103 2.085.103 3.77v5.666c0 1.685-.001 2.865-.103 3.77-.1.884-.285 1.381-.568 1.75a3.3 3.3 0 0 1-.6.6c-.37.284-.866.469-1.751.569-.905.102-2.085.103-3.77.103-1.684 0-2.864-.002-3.769-.104-.884-.1-1.381-.284-1.75-.568a3.3 3.3 0 0 1-.6-.6c-.284-.369-.469-.866-.569-1.75-.101-.905-.103-2.085-.103-3.77z" /></symbol>',"icon-copy");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 25 25" id="icon-check"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 5 8.688 16 4 11" /></symbol>',"icon-check");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 8" id="icon-tick"><path stroke="currentColor" stroke-width="2" d="m1 4 2.555 2.874a.15.15 0 0 0 .224 0L9 1" /></symbol>',"icon-tick");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="icon-search"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.167 15.833a6.667 6.667 0 1 0 0-13.333 6.667 6.667 0 0 0 0 13.333M17.5 17.5l-3.625-3.625" /></symbol>',"icon-search");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 12" id="icon-chevron-up"><g clip-path="url(#clip0_110_1442)"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m1 7.5 6-6 6 6" /></g></symbol>',"icon-chevron-up");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 12" id="icon-chevron-down"><g clip-path="url(#clip0_175_8656)"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m1 4.5 6 6 6-6" /></g></symbol>',"icon-chevron-down");u('<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 178 84" id="icon-logo"><path fill="#fff" d="M11.351 40h-8.08V13.818h8.438q3.81 0 6.52 1.573 2.71 1.56 4.155 4.487 1.444 2.915 1.444 6.98 0 4.09-1.457 7.044-1.457 2.94-4.244 4.526Q15.34 40 11.35 40m-4.909-2.812h4.705q3.246 0 5.382-1.253 2.135-1.254 3.183-3.567 1.048-2.315 1.048-5.51 0-3.17-1.035-5.459-1.036-2.301-3.094-3.528-2.058-1.24-5.126-1.24H6.442zm23.425-23.37h3.784l8.897 21.733h.307l8.898-21.733h3.784V40h-2.966V20.108h-.256L44.134 40H41.27l-8.182-19.892h-.255V40h-2.966zm33.82 0 7.773 22.04h.307l7.773-22.04h3.324L73.25 40h-3.272l-9.614-26.182zm44.736 0V40h-3.068L91.088 19.443h-.255V40h-3.171V13.818h3.068l14.318 20.608h.256V13.818z" /><path fill="url(#icon-logo_a)" d="M125.872 40v-2.301l8.642-9.46a60 60 0 0 0 2.506-2.89q.984-1.24 1.457-2.326a5.6 5.6 0 0 0 .486-2.301q0-1.38-.665-2.391a4.3 4.3 0 0 0-1.789-1.56q-1.138-.55-2.557-.55-1.509 0-2.634.627a4.3 4.3 0 0 0-1.726 1.726q-.6 1.111-.6 2.608h-3.017q0-2.3 1.061-4.04a7.37 7.37 0 0 1 2.889-2.71q1.841-.972 4.129-.972 2.302 0 4.078.972 1.778.971 2.787 2.62 1.01 1.65 1.01 3.67 0 1.444-.524 2.825-.512 1.368-1.79 3.055-1.265 1.675-3.515 4.091l-5.881 6.29v.205h12.17V40zm24.767.205a2.21 2.21 0 0 1-1.623-.678 2.21 2.21 0 0 1-.678-1.624q0-.946.678-1.623a2.21 2.21 0 0 1 1.623-.678q.946 0 1.624.678.677.677.677 1.623 0 .627-.319 1.151-.308.524-.831.844a2.2 2.2 0 0 1-1.151.306m16.01.153q-2.89 0-4.922-1.572-2.033-1.586-3.107-4.59-1.073-3.017-1.073-7.287 0-4.245 1.073-7.248 1.087-3.018 3.12-4.603 2.045-1.598 4.909-1.598t4.896 1.598q2.046 1.585 3.12 4.602 1.086 3.005 1.086 7.25 0 4.27-1.074 7.286-1.074 3.005-3.106 4.59-2.033 1.572-4.922 1.572m0-2.812q2.863 0 4.449-2.762 1.585-2.76 1.585-7.875 0-3.4-.729-5.791-.715-2.39-2.071-3.644-1.343-1.252-3.234-1.252-2.838 0-4.436 2.8-1.599 2.786-1.598 7.887 0 3.4.716 5.779.715 2.377 2.058 3.617 1.355 1.24 3.26 1.24" /><path fill="url(#icon-logo_b)" d="M16.937 62.67V77h-1.7V66.47q0-.21.01-.45l.04-.49-4.92 8.96q-.23.45-.7.45h-.28q-.47 0-.7-.45l-5.02-9q.06.53.06.98V77h-1.7V62.67h1.43q.26 0 .4.05t.27.28l4.95 8.82q.12.24.23.5.12.26.22.53.1-.27.21-.53.111-.27.24-.51l4.86-8.81q.12-.23.26-.28.15-.05.41-.05zm14.505 12.75-.01 1.58h-8.83V62.67h8.83v1.58h-6.89v4.76h5.58v1.52h-5.58v4.89zM47.075 77h-1.92a.52.52 0 0 1-.35-.11 1.2 1.2 0 0 1-.2-.26l-3.84-6.02q-.081.24-.18.41l-3.74 5.61q-.1.14-.22.26a.42.42 0 0 1-.31.11h-1.8l4.93-7.36-4.73-6.97h1.93q.21 0 .31.07a.7.7 0 0 1 .18.2l3.74 5.74q.069-.21.21-.46l3.53-5.24a.7.7 0 0 1 .19-.22q.11-.09.26-.09h1.85l-4.75 6.88zm18.968-14.33V77h-1.7V66.47q0-.21.01-.45l.04-.49-4.92 8.96q-.23.45-.7.45h-.28q-.47 0-.7-.45l-5.02-9q.06.53.06.98V77h-1.7V62.67h1.43q.26 0 .4.05t.27.28l4.95 8.82q.12.24.23.5.12.26.22.53.099-.27.21-.53.11-.27.24-.51l4.86-8.81q.12-.23.26-.28.15-.05.41-.05zm13.254 9.01-2.25-5.83a12 12 0 0 1-.42-1.34q-.21.81-.43 1.35l-2.25 5.82zm4.04 5.32h-1.5a.65.65 0 0 1-.42-.13.8.8 0 0 1-.24-.33l-1.34-3.46h-6.43l-1.34 3.46a.7.7 0 0 1-.23.32.65.65 0 0 1-.43.14h-1.49l5.73-14.33h1.96zm12.17-12.7h-4.64V77h-1.93V64.3h-4.65v-1.63h11.22z" /><defs><linearGradient id="icon-logo_a" x1="0" x2="30.003" y1="0" y2="98.898" gradientUnits="userSpaceOnUse"><stop stop-color="#43CBFF" /><stop offset="1" stop-color="#9708CC" /></linearGradient><linearGradient id="icon-logo_b" x1="-26.838" x2="-15.251" y1="25.552" y2="101.32" gradientUnits="userSpaceOnUse"><stop stop-color="#43CBFF" /><stop offset="1" stop-color="#9708CC" /></linearGradient></defs></symbol>',"icon-logo");class g{static _instance;subject;semester;teacher;category;search;constructor(){if(g._instance)return g._instance;this.subject=new Set,this.semester=new Set,this.teacher=new Set,this.category=new Set,this.search="",g._instance=this}getFilterArrByKey(t){if(!this[t])return[];const r=[];for(let o of this[t])r.push(o);return r}toggleFilterValue(t,r){this[t]&&(this[t].has(r)?this[t].delete(r):this[t].add(r))}setSearchValue(t){this.search=t}}const c=new g;var D=/\{[^{}]+\}/g,x=({allowReserved:e,name:t,value:r})=>{if(r==null)return"";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?r:encodeURIComponent(r)}`},E=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},$=e=>{switch(e){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},F=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},S=({allowReserved:e,explode:t,name:r,style:o,value:n})=>{if(!t){let i=(e?n:n.map(a=>encodeURIComponent(a))).join($(o));switch(o){case"label":return`.${i}`;case"matrix":return`;${r}=${i}`;case"simple":return i;default:return`${r}=${i}`}}let l=E(o),s=n.map(i=>o==="label"||o==="simple"?e?i:encodeURIComponent(i):x({allowReserved:e,name:r,value:i})).join(l);return o==="label"||o==="matrix"?l+s:s},z=({allowReserved:e,explode:t,name:r,style:o,value:n})=>{if(n instanceof Date)return`${r}=${n.toISOString()}`;if(o!=="deepObject"&&!t){let i=[];Object.entries(n).forEach(([y,h])=>{i=[...i,y,e?h:encodeURIComponent(h)]});let a=i.join(",");switch(o){case"form":return`${r}=${a}`;case"label":return`.${a}`;case"matrix":return`;${r}=${a}`;default:return a}}let l=F(o),s=Object.entries(n).map(([i,a])=>x({allowReserved:e,name:o==="deepObject"?`${r}[${i}]`:i,value:a})).join(l);return o==="label"||o==="matrix"?l+s:s},M=({path:e,url:t})=>{let r=t,o=t.match(D);if(o)for(let n of o){let l=!1,s=n.substring(1,n.length-1),i="simple";s.endsWith("*")&&(l=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(s=s.substring(1),i="label"):s.startsWith(";")&&(s=s.substring(1),i="matrix");let a=e[s];if(a==null)continue;if(Array.isArray(a)){r=r.replace(n,S({explode:l,name:s,style:i,value:a}));continue}if(typeof a=="object"){r=r.replace(n,z({explode:l,name:s,style:i,value:a}));continue}if(i==="matrix"){r=r.replace(n,`;${x({name:s,value:a})}`);continue}let y=encodeURIComponent(i==="label"?`.${a}`:a);r=r.replace(n,y)}return r},V=({allowReserved:e,array:t,object:r}={})=>o=>{let n=[];if(o&&typeof o=="object")for(let l in o){let s=o[l];if(s!=null){if(Array.isArray(s)){n=[...n,S({allowReserved:e,explode:!0,name:l,style:"form",value:s,...t})];continue}if(typeof s=="object"){n=[...n,z({allowReserved:e,explode:!0,name:l,style:"deepObject",value:s,...r})];continue}n=[...n,x({allowReserved:e,name:l,value:s})]}}return n.join("&")},U=e=>{if(e){if(e.startsWith("application/json")||e.endsWith("+json"))return"json";if(e==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(t=>e.startsWith(t)))return"blob";if(e.startsWith("text/"))return"text"}},G=({baseUrl:e,path:t,query:r,querySerializer:o,url:n})=>{let l=n.startsWith("/")?n:`/${n}`,s=e+l;t&&(s=M({path:t,url:s}));let i=r?o(r):"";return i.startsWith("?")&&(i=i.substring(1)),i&&(s+=`?${i}`),s},A=(e,t)=>{let r={...e,...t};return r.baseUrl?.endsWith("/")&&(r.baseUrl=r.baseUrl.substring(0,r.baseUrl.length-1)),r.headers=L(e.headers,t.headers),r},L=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let o=r instanceof Headers?r.entries():Object.entries(r);for(let[n,l]of o)if(l===null)t.delete(n);else if(Array.isArray(l))for(let s of l)t.append(n,s);else l!==void 0&&t.set(n,typeof l=="object"?JSON.stringify(l):l)}return t},q=class{_fns;constructor(){this._fns=[]}clear(){this._fns=[]}exists(e){return this._fns.indexOf(e)!==-1}eject(e){let t=this._fns.indexOf(e);t!==-1&&(this._fns=[...this._fns.slice(0,t),...this._fns.slice(t+1)])}use(e){this._fns=[...this._fns,e]}},N=()=>({error:new q,request:new q,response:new q}),P={bodySerializer:e=>JSON.stringify(e)},H=V({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),W={"Content-Type":"application/json"},O=(e={})=>({...P,baseUrl:"",fetch:globalThis.fetch,headers:W,parseAs:"auto",querySerializer:H,...e}),T=(e={})=>{let t=A(O(),e),r=()=>({...t}),o=s=>(t=A(t,s),r()),n=N(),l=async s=>{let i={...t,...s,headers:L(t.headers,s.headers)};i.body&&i.bodySerializer&&(i.body=i.bodySerializer(i.body)),i.body||i.headers.delete("Content-Type");let a=G({baseUrl:i.baseUrl??"",path:i.path,query:i.query,querySerializer:typeof i.querySerializer=="function"?i.querySerializer:V(i.querySerializer),url:i.url}),y={redirect:"follow",...i},h=new Request(a,y);for(let f of n.request._fns)h=await f(h,i);let I=i.fetch,d=await I(h);for(let f of n.response._fns)d=await f(d,h,i);let b={request:h,response:d};if(d.ok){if(d.status===204||d.headers.get("Content-Length")==="0")return{data:{},...b};if(i.parseAs==="stream")return{data:d.body,...b};let f=(i.parseAs==="auto"?U(d.headers.get("Content-Type")):i.parseAs)??"json",j=await d[f]();return f==="json"&&i.responseTransformer&&(j=await i.responseTransformer(j)),{data:j,...b}}let v=await d.text();try{v=JSON.parse(v)}catch{}let w=v;for(let f of n.error._fns)w=await f(v,d,h,i);if(w=w||{},i.throwOnError)throw w;return{error:w,...b}};return{connect:s=>l({...s,method:"CONNECT"}),delete:s=>l({...s,method:"DELETE"}),get:s=>l({...s,method:"GET"}),getConfig:r,head:s=>l({...s,method:"HEAD"}),interceptors:n,options:s=>l({...s,method:"OPTIONS"}),patch:s=>l({...s,method:"PATCH"}),post:s=>l({...s,method:"POST"}),put:s=>l({...s,method:"PUT"}),request:l,setConfig:o,trace:s=>l({...s,method:"TRACE"})}};const C=T({baseUrl:"https://51.250.43.136/"});C.interceptors.response.use(e=>(e.status===200&&console.log(`request to ${e.url} was successful`),e));const R=T(O()),K=e=>(e?.client??R).get({...e,url:"/resources"}),J=e=>(e?.client??R).get({...e,url:"/search"}),Q=async()=>{const e={subjectArray:c.subject.size?c.getFilterArrByKey("subject").join(","):"",semesterArray:c.semester.size?c.getFilterArrByKey("semester").join(","):"",teacherArray:c.teacher.size?c.getFilterArrByKey("teacher").join(","):"",subjectTypeArray:c.category.size?c.getFilterArrByKey("category").join(","):""},{data:t}=await K({client:C,query:{...e}});return t.map(o=>({file:o.name,discipline:o.subject_name,type:o.category_name,year:o.year,author:o.teacher_name,is_file:o.is_file,document_id:o.document_id,link:o.link}))},X=async()=>{const e={subjectArray:c.subject.size?c.getFilterArrByKey("subject").join(","):"",semesterArray:c.semester.size?c.getFilterArrByKey("semester").join(","):"",teacherArray:c.teacher.size?c.getFilterArrByKey("teacher").join(","):"",subjectTypeArray:c.category.size?c.getFilterArrByKey("category").join(","):""},{data:t}=await J({client:C,query:{prompt:c.search,...e}});return t.map(o=>({file:o.name,discipline:o.subject_name,type:o.category_name,year:o.year,author:o.teacher_name,is_file:o.is_file,document_id:o.document_id,link:o.link}))},Y=async e=>{try{const t=document.createElement("a");t.href=e,t.download=e.split("/").pop()||"file",t.setAttribute("target","_blank"),t.target="_self",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(t){console.error(t.message);const r="Файл для скачивания не был найден.",o=document.createElement("div");o.innerText=r,o.style.position="fixed",o.style.top="20px",o.style.right="50%",o.style.transform="translate(50%, 0)",o.style.backgroundColor="#f95d5d",o.style.color="white",o.style.textAlign="center",o.style.padding="10px",o.style.width="300px",o.style.borderRadius="5px",o.style.zIndex="999",document.body.appendChild(o),setTimeout(()=>{document.body.removeChild(o)},1e3)}},Z=e=>e.split(" ").map((t,r)=>r!==0?`${t[0]}.`:t).join(" "),_=document.querySelector("#documentContainer");let p=[];try{p=await Q(),p=p.slice(0,500),console.log("All documents:",p)}catch(e){console.error("Failed to load documents:",e)}const ee=async()=>{try{let e;const t={rowData:p.slice(0,500),columnDefs:[{field:"file",checkboxSelection:!0,filter:!0},{field:"discipline",filter:!0},{field:"type",filter:!0},{field:"year",filter:"agNumberColumnFilter"},{field:"author",filter:!0,cellRenderer:({data:r})=>`<span>${Z(r.author)}</span>`}],rowHeight:68,onRowClicked:async r=>{const o=r.data;try{o.is_file?(console.info("Document can be downloaded"),await Y(o.link)):(console.info("Document cannot be downloaded"),window.open(o.link,"_blank").active())}catch(n){console.error("Error handling row click:",n)}}};return{init:r=>{e=agGrid.createGrid(r,t)},update:r=>{e.setRowData(r)}}}catch(e){return console.error("Error initializing table:",e),{error:"Failed to initialize table"}}},m=await ee(),de=async()=>{m.init?m.init(_):_.innerHTML=m.error},te=(e=p)=>{m.update?m.update(e):_.innerHTML=m.error},k={toggleList:se,searchInput:ne,checkItem:ae};function re(e){e.stopPropagation();const t=e.target.dataset.filter||e.target.closest("[data-filter]").dataset.filter,r=e.target.closest('[data-filter="item"]');if(console.log(e.target),console.log(t),console.log(k[t]),t&&k[t]&&e.target.getAttribute("type")!=="checkbox"){const o=e.target.dataset.filterValue||e.target.closest("[data-filter]").dataset.filterValue;k[t].call(null,r,o)}}function oe(e,t){const r=t.querySelectorAll("[data-filter-value]"),o=e.value.trim().toLowerCase();ie(r),o&&le(r,o)}function se(e){e.classList.toggle("--open"),e.classList.toggle("--visible")}function ne(e){e.addEventListener("input",t=>{oe(t.target,e)})}function ie(e){e.forEach(t=>{t.classList.remove("--hidden")})}function le(e,t){e.forEach(r=>{r.dataset.filterValue.includes(t)||r.classList.add("--hidden")})}async function ae(e,t){const r=e.dataset.filterGroup;c.toggleFilterValue(r,t);const o=await X();await te(o)}const ce=document.querySelector("#sidebar");ce.addEventListener("click",re,!1);export{de as d};
